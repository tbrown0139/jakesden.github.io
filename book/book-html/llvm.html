<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /><title>LLVM-3.9.1</title><link rel="stylesheet" href="stylesheets/lfs.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="stylesheet" href="../stylesheets/lfs-print.css" type="text/css" media="print" /></head><body class="blfs" id="blfs-2017-01-20"><div class="navheader"><h4>Beyond Linux<sup>®</sup> From Scratch - Version 2017-01-20</h4><h3>Chapter 1. Installing packages in dependency build order</h3><ul><li class="prev"><a accesskey="p" href="libvdpau.html" title="libvdpau-1.1.1">Prev</a><p>libvdpau-1.1.1</p></li><li class="next"><a accesskey="n" href="mesa.html" title="Mesa-13.0.3">Next</a><p>Mesa-13.0.3</p></li><li class="up"><a accesskey="u" href="ch01.html" title="Chapter 1. Installing packages in dependency build order">Up</a></li><li class="home"><a accesskey="h" href="index.html" title="Beyond Linux® From Scratch - Version 2017-01-20">Home</a></li></ul></div><div class="sect1" lang="en" xml:lang="en"><h1 class="sect1"><a id="llvm" name="llvm"></a>LLVM-3.9.1</h1><div class="package" lang="en" xml:lang="en"><h2 class="sect2">Introduction to LLVM</h2><p>
      The <span class="application">LLVM</span> package contains a collection of
      modular and reusable compiler and toolchain technologies. The Low Level
      Virtual Machine (LLVM) Core libraries provide a modern source and
      target-independent optimizer, along with code generation support for many
      popular CPUs (as well as some less common ones!). These libraries are
      built around a well specified code representation known as the LLVM
      intermediate representation ("LLVM IR").
    </p><p>
      The optional <span class="application">Clang</span> and <span class="application">Compiler
      RT</span> packages provide new C, C++, Objective C and Objective
      C++ front-ends and runtime libraries for the
      <span class="application">LLVM</span>.
    </p><p>This package is known to build and work
                              properly using an LFS-7.10 platform.</p><h3>Package Information</h3><div class="itemizedlist"><ul class="compact"><li><p>
          Download (HTTP): <a class="ulink" href="http://llvm.org/releases/3.9.1/llvm-3.9.1.src.tar.xz">http://llvm.org/releases/3.9.1/llvm-3.9.1.src.tar.xz</a>
        </p></li><li></li><li><p>
          Download MD5 sum: 3259018a7437e157f3642df80f1983ea
        </p></li><li><p>
          Download size: 17 MB
        </p></li><li><p>
          Estimated disk space required: 2.2 GB (with Clang, add 7.3 GB for tests)
        </p></li><li><p>
          Estimated build time: 20 SBU (with Clang and parallelism=4, add 5 SBU for tests)
        </p></li></ul></div><h3>Optional Downloads</h3><h4>Clang</h4><div class="itemizedlist"><ul class="compact"><li><p>
            Download: <a class="ulink" href="http://llvm.org/releases/3.9.1/cfe-3.9.1.src.tar.xz">http://llvm.org/releases/3.9.1/cfe-3.9.1.src.tar.xz</a>
          </p></li><li><p>
            Download MD5 sum: 45713ec5c417ed9cad614cd283d786a1
          </p></li><li><p>
            Download size: 10 MB
          </p></li></ul></div><h4>Compiler RT</h4><div class="itemizedlist"><ul class="compact"><li><p>
            Download: <a class="ulink" href="http://llvm.org/releases/3.9.1/compiler-rt-3.9.1.src.tar.xz">http://llvm.org/releases/3.9.1/compiler-rt-3.9.1.src.tar.xz</a>
          </p></li><li><p>
            Download MD5 sum: aadc76e7e180fafb10fb729444e287a3
          </p></li><li><p>
            Download size: 1.3 MB
          </p></li></ul></div><h3>LLVM Dependencies</h3><h4>Required</h4><p class="required">
      <a class="xref" href="cmake.html" title="CMake-3.7.2">CMake-3.7.2</a>
    </p><h4>Recommended</h4><p class="recommended">
      <a class="xref" href="libffi.html" title="libffi-3.2.1">libffi-3.2.1</a> and
      <a class="xref" href="python2.html" title="Python-2.7.13">Python-2.7.13</a>
    </p><h4>Optional</h4><p class="optional">
      <a class="xref" href="doxygen.html" title="Doxygen-1.8.13">Doxygen-1.8.13</a>,
      graphviz (in full book)
              ,
      <a class="xref" href="libxml2.html" title="libxml2-2.9.4">libxml2-2.9.4</a>,
      texlive (in full book)
               (or tl-installer (in full book)
              ),
      <a class="xref" href="valgrind.html" title="Valgrind-3.12.0">Valgrind-3.12.0</a>,
      <a class="xref" href="zip.html" title="Zip-3.0">Zip-3.0</a>,
      <a class="ulink" href="http://www.ocaml.org/">OCaml</a>, and
      <a class="ulink" href="http://pypi.python.org/pypi/Sphinx">Sphinx</a>
    </p><p class="usernotes">User Notes:
      <a class="ulink" href="http://wiki.linuxfromscratch.org/blfs/wiki/llvm">http://wiki.linuxfromscratch.org/blfs/wiki/llvm</a>
    </p></div><div class="installation" lang="en" xml:lang="en"><h2 class="sect2">Installation of LLVM</h2><p>
      If you have downloaded the optional packages, install them into
      the source tree by running the following commands:
    </p><pre class="userinput"><kbd class="command">tar -xf ../cfe-3.9.1.src.tar.xz -C tools &amp;&amp;
tar -xf ../compiler-rt-3.9.1.src.tar.xz -C projects &amp;&amp;

mv tools/cfe-3.9.1.src tools/clang &amp;&amp;
mv projects/compiler-rt-3.9.1.src projects/compiler-rt</kbd></pre><p>
      Install <span class="application">LLVM</span> by running the following
      commands:
    </p><pre class="userinput"><kbd class="command">mkdir -v build &amp;&amp;
cd       build &amp;&amp;

CC=gcc CXX=g++                              \
cmake -DCMAKE_INSTALL_PREFIX=/usr           \
      -DLLVM_ENABLE_FFI=ON                  \
      -DCMAKE_BUILD_TYPE=Release            \
      -DLLVM_BUILD_LLVM_DYLIB=ON            \
      -DLLVM_TARGETS_TO_BUILD="host;AMDGPU" \
      -Wno-dev ..                           &amp;&amp;
make</kbd></pre><p>
      If you have installed <span class="application">Sphinx</span> and wish
      to generate the html documentation and manual pages, issue the
      following commands:
    </p><pre class="userinput"><kbd class="command">cmake -DLLVM_ENABLE_SPHINX=ON         \
      -DSPHINX_WARNINGS_AS_ERRORS=OFF \
      -Wno-dev ..                     &amp;&amp;
make docs-llvm-html  docs-llvm-man</kbd></pre><p>
      If you have downloaded the optional packages, the clang documentation
      can be built too:
    </p><pre class="userinput"><kbd class="command">make docs-clang-html docs-clang-man</kbd></pre><p>
      To test the results, issue: <span class="command"><strong>make check-all</strong></span>. Tests are
      run using the maximum number of processors/threads available.
      Note that the Address Sanitizer tests are known to fail currently.

    </p><p>
      Now, as the <code class="systemitem">root</code> user:
    </p><pre class="root"><kbd class="command">make install</kbd></pre><p>
      If you have built  the documentation, install it by running the
      following command as the <code class="systemitem">root</code>
      user:
    </p><pre class="root"><kbd class="command">install -v -m644 docs/man/* /usr/share/man/man1             &amp;&amp;
install -v -d -m755 /usr/share/doc/llvm-3.9.1/llvm-html     &amp;&amp;
cp -Rv docs/html/* /usr/share/doc/llvm-3.9.1/llvm-html</kbd></pre><p>
      The clang documentation can be installed in the same way (again as the
      <code class="systemitem">root</code> user):
    </p><pre class="root"><kbd class="command">install -v -m644 tools/clang/docs/man/* /usr/share/man/man1 &amp;&amp;
install -v -d -m755 /usr/share/doc/llvm-3.9.1/clang-html    &amp;&amp;
cp -Rv tools/clang/docs/html/* /usr/share/doc/llvm-3.9.1/clang-html</kbd></pre></div><div class="commands" lang="en" xml:lang="en"><h2 class="sect2">Command Explanations</h2><p>
      <em class="parameter"><code>-DLLVM_ENABLE_FFI=ON</code></em>: This switch enables
      <span class="application">LLVM</span> to use
      <span class="application">libffi</span>. Remove if you did not
      install <span class="application">libffi</span>.
    </p><p>
      <em class="parameter"><code>-DLLVM_BUILD_LLVM_DYLIB=ON</code></em>: builds libraries as
      static and links all of them into an unique shared one. This is the
      recommended way of building a shared library.
    </p><p>
      <em class="parameter"><code>-DCMAKE_BUILD_TYPE=Release</code></em>: This switch enables
      compiler optimizations in order to speed up the code and reduce its size.
      It also disables some compile checks, not necessary on a production
      system.
    </p><p>
      <em class="parameter"><code>-DLLVM_TARGETS_TO_BUILD="host;AMDGPU"</code></em>: This
      switch enables building for the same target as the host, and also for
      the r600 AMD GPU used by the Mesa r600 and radeonsi drivers. Default is
      all. You can use a semicolon separated list. Valid targets are: host,
      X86, Sparc, PowerPC, ARM, AArch64, Mips, Hexagon, Xcore, MSP430, NVPTX,
      SystemZ, AMDGPU, BPF, CppBackend, or all.
    </p><p>
      <code class="option">-DLLVM_LINK_LLVM_DYLIB=ON</code>: Used in conjunction with
      <em class="parameter"><code>-DLLVM_BUILD_LLVM_DYLIB=ON</code></em>, this switch enables
      linking the tools against the shared library instead of the static ones.
    </p><p>
      <code class="option">-DBUILD_SHARED_LIBS=ON</code>: if used instead of
      <em class="parameter"><code>-DLLVM_BUILD_LLVM_DYLIB=ON</code></em>, builds all the
      <span class="application">LLVM</span> libraries (about 60) as shared
      libraries instead of static.
    </p><p>
      <code class="option">-DLLVM_ENABLE_DOXYGEN</code>: Enables the generation of
      browsable HTML documentation if you have installed <a class="xref" href="doxygen.html" title="Doxygen-1.8.13">Doxygen-1.8.13</a>. You should run <span class="command"><strong>make doxygen-html</strong></span>
      afterwards, and install the generated documentation manually.
    </p></div><div class="content" lang="en" xml:lang="en"><h2 class="sect2">Contents</h2><div class="segmentedlist"><div class="seglistitem"><div class="seg"><strong class="segtitle">Installed Programs: </strong><span class="segbody">
          bugpoint, c-index-test, clang, clang++ (symlinks to
          clang-&lt;version&gt;), clang-&lt;version&gt;, clang-check, clang-cl,
          clang-format, git-clang-format,
          llc, lli, llvm-ar, llvm-as, llvm-bcanalyzer, llvm-config, llvm-cov,
          llvm-c-test, llvm-cxxdump, llvm-diff, llvm-dis, llvm-dsymutil,
          llvm-dwarfdump, llvm-dwp, llvm-extract, llvm-lib (symlink to
          llvm-ar), llvm-link, llvm-lto, llvm-mc, llvm-mcmarkup, llvm-nm,
          llvm-objdump, llvm-pdbdump, llvm-profdata, llvm-ranlib (symlink to
          llvm-ar), llvm-readobj, llvm-rtdyld, llvm-size, llvm-split,
          llvm-stress, llvm-symbolizer, llvm-tblgen, obj2yaml, opt, sancov,
          sanstats, scan-build, scan-view, verify-uselistorder, and yaml2obj
        </span></div><div class="seg"><strong class="segtitle">Installed Libraries: </strong><span class="segbody">
          BugpointPasses.so,  LLVMHello.so, libLLVM.so, libLLVM*.a (57
          libraries), libLTO.so, libclang.so and libclang*.a (24 libraries)
        </span></div><div class="seg"><strong class="segtitle">Installed Directories: </strong><span class="segbody">
          /usr/include/{clang,clang-c,llvm,llvm-c},
          /usr/lib/{clang,cmake/{clang,llvm}} and
          /usr/share/{clang,scan-build,scan-view,doc/llvm-3.9.1}
        </span></div></div></div><div class="variablelist"><h3>Short Descriptions</h3><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><a id="bugpoint"></a><span class="term"><span class="command"><strong>bugpoint</strong></span></span></p></td><td><p>
            is the automatic test case reduction tool.
          </p></td></tr><tr><td><p><a id="clang"></a><span class="term"><span class="command"><strong>clang</strong></span></span></p></td><td><p>
            is the <span class="application">Clang</span> C, C++,
            and Objective-C compiler.
          </p></td></tr><tr><td><p><a id="clang-format"></a><span class="term"><span class="command"><strong>clang-format</strong></span></span></p></td><td><p>
            is a tool to format C/C++/Java/JavaScript/Objective-C/Protobuf
            code.
          </p></td></tr><tr><td><p><a id="llc"></a><span class="term"><span class="command"><strong>llc</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> static compiler.
          </p></td></tr><tr><td><p><a id="lli"></a><span class="term"><span class="command"><strong>lli</strong></span></span></p></td><td><p>
            is used to directly execute programs from
            <span class="application">LLVM</span> bitcode.
          </p></td></tr><tr><td><p><a id="llvm-ar"></a><span class="term"><span class="command"><strong>llvm-ar</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> archiver.
          </p></td></tr><tr><td><p><a id="llvm-as"></a><span class="term"><span class="command"><strong>llvm-as</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> assembler.
          </p></td></tr><tr><td><p><a id="llvm-bcanalyzer"></a><span class="term"><span class="command"><strong>llvm-bcanalyzer</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> bitcode analyzer.
          </p></td></tr><tr><td><p><a id="llvm-config"></a><span class="term"><span class="command"><strong>llvm-config</strong></span></span></p></td><td><p>
            Prints <span class="application">LLVM</span> compilation options.
          </p></td></tr><tr><td><p><a id="llvm-cov"></a><span class="term"><span class="command"><strong>llvm-cov</strong></span></span></p></td><td><p>
            is used to emit coverage information.
          </p></td></tr><tr><td><p><a id="llvm-c-test"></a><span class="term"><span class="command"><strong>llvm-c-test</strong></span></span></p></td><td><p>
            is a bytecode disassembler.
          </p></td></tr><tr><td><p><a id="llvm-cxxdump"></a><span class="term"><span class="command"><strong>llvm-cxxdump</strong></span></span></p></td><td><p>
            is used as a C++ ABI Data Dumper.
          </p></td></tr><tr><td><p><a id="llvm-diff"></a><span class="term"><span class="command"><strong>llvm-diff</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> structural
            '<span class="command"><strong>diff</strong></span>'.
          </p></td></tr><tr><td><p><a id="llvm-dis"></a><span class="term"><span class="command"><strong>llvm-dis</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> disassembler.
          </p></td></tr><tr><td><p><a id="llvm-dsymutil"></a><span class="term"><span class="command"><strong>llvm-dsymutil</strong></span></span></p></td><td><p>
            is a tool used to manipulate archived DWARF debug symbol files,
            compatible with the Darwin command <span class="command"><strong>dsymutil</strong></span>.
          </p></td></tr><tr><td><p><a id="llvm-dwarfdump"></a><span class="term"><span class="command"><strong>llvm-dwarfdump</strong></span></span></p></td><td><p>
            prints the content of DWARF sections in object files.
          </p></td></tr><tr><td><p><a id="llvm-dwp"></a><span class="term"><span class="command"><strong>llvm-dwp</strong></span></span></p></td><td><p>
            merges split DWARF files.
          </p></td></tr><tr><td><p><a id="llvm-extract"></a><span class="term"><span class="command"><strong>llvm-extract</strong></span></span></p></td><td><p>
            is used to extract a function from an
            <span class="application">LLVM</span> module.
          </p></td></tr><tr><td><p><a id="llvm-link"></a><span class="term"><span class="command"><strong>llvm-link</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> linker.
          </p></td></tr><tr><td><p><a id="llvm-lto"></a><span class="term"><span class="command"><strong>llvm-lto</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> LTO (link time optimization)
            linker.
          </p></td></tr><tr><td><p><a id="llvm-mc"></a><span class="term"><span class="command"><strong>llvm-mc</strong></span></span></p></td><td><p>
            is a standalone machine code assembler/disassembler.
          </p></td></tr><tr><td><p><a id="llvm-nm"></a><span class="term"><span class="command"><strong>llvm-nm</strong></span></span></p></td><td><p>
            is used to list <span class="application">LLVM</span> bitcode
            and object file's symbol table.
          </p></td></tr><tr><td><p><a id="llvm-objdump"></a><span class="term"><span class="command"><strong>llvm-objdump</strong></span></span></p></td><td><p>
            is an <span class="application">LLVM</span> object file dumper.
          </p></td></tr><tr><td><p><a id="llvm-pdbdump"></a><span class="term"><span class="command"><strong>llvm-pdbdump</strong></span></span></p></td><td><p>
            is used as PDB Dumper.
          </p></td></tr><tr><td><p><a id="llvm-profdata"></a><span class="term"><span class="command"><strong>llvm-profdata</strong></span></span></p></td><td><p>
            is a small tool to manipulate and print profile data files.
          </p></td></tr><tr><td><p><a id="llvm-ranlib"></a><span class="term"><span class="command"><strong>llvm-ranlib</strong></span></span></p></td><td><p>
            is used to generate an index for a <span class="application">LLVM</span>
            archive.
          </p></td></tr><tr><td><p><a id="llvm-readobj"></a><span class="term"><span class="command"><strong>llvm-readobj</strong></span></span></p></td><td><p>
            displays low-level format-specific information about object files.
          </p></td></tr><tr><td><p><a id="llvm-rtdyld"></a><span class="term"><span class="command"><strong>llvm-rtdyld</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> MC-JIT tool.
          </p></td></tr><tr><td><p><a id="llvm-size"></a><span class="term"><span class="command"><strong>llvm-size</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> object size dumper.
          </p></td></tr><tr><td><p><a id="llvm-split"></a><span class="term"><span class="command"><strong>llvm-split</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> module splitter.
          </p></td></tr><tr><td><p><a id="llvm-stress"></a><span class="term"><span class="command"><strong>llvm-stress</strong></span></span></p></td><td><p>
            is used to generate random
            <code class="filename">.ll</code> files.
          </p></td></tr><tr><td><p><a id="llvm-symbolizer"></a><span class="term"><span class="command"><strong>llvm-symbolizer</strong></span></span></p></td><td><p>
            converts adresses into source code locations.
          </p></td></tr><tr><td><p><a id="llvm-tblgen"></a><span class="term"><span class="command"><strong>llvm-tblgen</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> Target Description
            To C++ Code Generator.
          </p></td></tr><tr><td><p><a id="obj2yaml"></a><span class="term"><span class="command"><strong>obj2yaml</strong></span></span></p></td><td><p>
            takes an object file,and produces a YAML representation of the
            file.
          </p></td></tr><tr><td><p><a id="opt"></a><span class="term"><span class="command"><strong>opt</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> optimizer.
          </p></td></tr><tr><td><p><a id="sancov"></a><span class="term"><span class="command"><strong>sancov</strong></span></span></p></td><td><p>
            is the sanitizer coverage processing tool.
          </p></td></tr><tr><td><p><a id="sanstats"></a><span class="term"><span class="command"><strong>sanstats</strong></span></span></p></td><td><p>
            is the sanitizer statistics processing tool.
          </p></td></tr><tr><td><p><a id="scan-build"></a><span class="term"><span class="command"><strong>scan-build</strong></span></span></p></td><td><p>
            is a <span class="application">Perl</span> script that invokes the
            <span class="application">Clang</span> static analyzer.
          </p></td></tr><tr><td><p><a id="scan-view"></a><span class="term"><span class="command"><strong>scan-view</strong></span></span></p></td><td><p>
            is a viewer for <span class="application">Clang</span> static analyzer
            results.
          </p></td></tr><tr><td><p><a id="verify-uselistorder"></a><span class="term"><span class="command"><strong>verify-uselistorder</strong></span></span></p></td><td><p>
            is the <span class="application">LLVM</span> tool to verify use-list
            order.
          </p></td></tr><tr><td><p><a id="yaml2obj"></a><span class="term"><span class="command"><strong>yaml2obj</strong></span></span></p></td><td><p>
            takes a YAML representation of an object file and converts it
            to an binary file.
          </p></td></tr></tbody></table></div></div><p class="updated">Last updated 
      on
       2016-12-28 10:12:33 +0000</p></div><div class="navfooter"><ul><li class="prev"><a accesskey="p" href="libvdpau.html" title="libvdpau-1.1.1">Prev</a><p>libvdpau-1.1.1</p></li><li class="next"><a accesskey="n" href="mesa.html" title="Mesa-13.0.3">Next</a><p>Mesa-13.0.3</p></li><li class="up"><a accesskey="u" href="ch01.html" title="Chapter 1. Installing packages in dependency build order">Up</a></li><li class="home"><a accesskey="h" href="index.html" title="Beyond Linux® From Scratch - Version 2017-01-20">Home</a></li></ul></div></body></html>