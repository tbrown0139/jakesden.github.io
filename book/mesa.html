<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /><title>Mesa-13.0.3</title><link rel="stylesheet" href="stylesheets/lfs.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="stylesheet" href="../stylesheets/lfs-print.css" type="text/css" media="print" /></head><body class="blfs" id="blfs-2017-01-20"><div class="navheader"><h4>Beyond Linux<sup>®</sup> From Scratch - Version 2017-01-20</h4><h3>Chapter 1. Installing packages in dependency build order</h3><ul><li class="prev"><a accesskey="p" href="llvm.html" title="LLVM-3.9.1">Prev</a><p>LLVM-3.9.1</p></li><li class="next"><a accesskey="n" href="mtdev.html" title="mtdev-1.1.5">Next</a><p>mtdev-1.1.5</p></li><li class="up"><a accesskey="u" href="ch01.html" title="Chapter 1. Installing packages in dependency build order">Up</a></li><li class="home"><a accesskey="h" href="index.html" title="Beyond Linux® From Scratch - Version 2017-01-20">Home</a></li></ul></div><div class="sect1" lang="en" xml:lang="en"><h1 class="sect1"><a id="mesa" name="mesa"></a>Mesa-13.0.3</h1><div class="package" lang="en" xml:lang="en"><h2 class="sect2">Introduction to Mesa</h2><p>
      <span class="application">Mesa</span> is an OpenGL compatible 3D graphics
      library.
    </p><p>This package is known to build and work
                              properly using an LFS-7.10 platform.</p><h3>Package Information</h3><div class="itemizedlist"><ul class="compact"><li><p>
          Download (HTTP): <a class="ulink" href="https://mesa.freedesktop.org/archive/13.0.3/mesa-13.0.3.tar.xz">https://mesa.freedesktop.org/archive/13.0.3/mesa-13.0.3.tar.xz</a>
        </p></li><li><p>
          Download (FTP): <a class="ulink" href="ftp://ftp.freedesktop.org/pub/mesa/13.0.3/mesa-13.0.3.tar.xz">ftp://ftp.freedesktop.org/pub/mesa/13.0.3/mesa-13.0.3.tar.xz</a>
        </p></li><li><p>
          Download MD5 sum: 24e3fa52c95139dfa9ff5085d0c2ead6
        </p></li><li><p>
          Download size: 8.7 MB
        </p></li><li><p>
          Estimated disk space required: 240 MB (with demos and docs, add 48 MB for tests)
        </p></li><li><p>
          Estimated build time: 7.5 SBU (with demos and docs, add 0.6 SBU for tests)
        </p></li></ul></div><h3>Additional Downloads</h3><div class="itemizedlist"><ul class="compact"><li><p>
          Recommended patch:
          <a class="ulink" href="http://www.linuxfromscratch.org/patches/blfs/svn/mesa-13.0.3-add_xdemos-1.patch">http://www.linuxfromscratch.org/patches/blfs/svn/mesa-13.0.3-add_xdemos-1.patch</a>
          (installs 2 demo programs for testing Mesa - not needed if you
          install the <a class="ulink" href="ftp://ftp.freedesktop.org/pub/mesa/demos/">
          mesa-demos</a> package)
        </p></li></ul></div><h3>Mesa Dependencies</h3><h4>Required</h4><p class="required">
      xorg7-lib (in full book)
              ,
      <a class="xref" href="libdrm.html" title="libdrm-2.4.74">libdrm-2.4.74</a>, and
      <a class="xref" href="python2.html" title="Python-2.7.13">Python-2.7.13</a>
    </p><h4>Recommended</h4><p class="recommended">
      <a class="xref" href="elfutils.html" title="elfutils-0.168">elfutils-0.168</a> (required for the radeonsi driver),
      
      
      
      <a class="xref" href="libvdpau.html" title="libvdpau-1.1.1">libvdpau-1.1.1</a> (to build VDPAU drivers),
      
      <a class="xref" href="llvm.html" title="LLVM-3.9.1">LLVM-3.9.1</a> (required for Gallium3D r300 and radeonsi
      drivers and for the llvmpipe software rasterizer. See
      <a class="ulink" href="http://www.mesa3d.org/systems.html">http://www.mesa3d.org/systems.html</a> for more information.)
    </p><h4>Optional</h4><p class="optional">
      <a class="xref" href="libgcrypt.html" title="libgcrypt-1.7.5">libgcrypt-1.7.5</a>,
      <a class="xref" href="nettle.html" title="Nettle-3.3">Nettle-3.3</a>,
      <a class="xref" href="wayland.html" title="Wayland-1.12.0">Wayland-1.12.0</a> (required for
        plasma5-build (in full book)
              
          
          <span>and</span>
        lxqt (in full book)
              
          ),
      
      <a class="ulink" href="ftp://ftp.freedesktop.org/pub/mesa/demos/">mesa-demos</a>
      (provides more than 300 extra demos to test
      <span class="application">Mesa</span>; this includes the same programs added by
      the patch above), and
      
      <a class="ulink" href="http://omxil.sourceforge.net/">Bellagio OpenMAX Integration
      Layer</a> (for mobile platforms)
    </p><div class="admon note"><img alt="[Note]" src="images/note.png" /><h3>Note</h3><p>
        The instructions below assume that <span class="application">elfutils</span>
        and <span class="application">LLVM</span> with the r600/amdgpu and host 
        backends are installed. You will need to modify the instructions if you
        choose not to install them.  For an explanation of Gallium3D see
        <a class="ulink" href="https://en.wikipedia.org/wiki/Gallium3D">https://en.wikipedia.org/wiki/Gallium3D</a>.
      </p></div><p class="usernotes">User Notes:
      <a class="ulink" href="http://wiki.linuxfromscratch.org/blfs/wiki/mesa">http://wiki.linuxfromscratch.org/blfs/wiki/mesa</a>
    </p></div><div class="installation" lang="en" xml:lang="en"><h2 class="sect2">Installation of Mesa</h2><p>
      If you have downloaded the xdemos patch (needed if testing the Xorg
      installation per BLFS instructions), apply it by running the following
      command:
    </p><pre class="userinput"><kbd class="command">patch -Np1 -i ../mesa-13.0.3-add_xdemos-1.patch</kbd></pre><p>Now, select the drivers you wish to install.  The available drivers
   are i915, ilo, nouveau, r300, r600, radeonsi, freedreno, svga, swrast, vc4,
   and virgl.  If the Gallium drivers are not specified, the default is
   'r300,r600,svga,swrast'. Modify the command below for any desired drivers.
   The listed drivers below will cover most modern video cards.  For help in
   selecting drivers see 
   <a class="ulink" href="http://www.mesa3d.org/systems.html">http://www.mesa3d.org/systems.html</a>.</p><pre class="userinput"><kbd class="command">GLL_DRV="i915,r600,nouveau,radeonsi,svga,swrast"</kbd></pre><p>
      Install <span class="application">Mesa</span> by running the following
      commands:
    </p><div class="admon note"><img alt="[Note]" src="images/note.png" /><h3>Note</h3><p>
        Add wayland to the <em class="parameter"><code>--with-egl-platforms</code></em> switch
        below if you plan on building
        plasma5-build (in full book)
              
        <span>or</span>
        lxqt (in full book)
              .
      </p></div><pre class="userinput"><kbd class="command">sed -i "/pthread_stubs_possible=/s/yes/no/" configure.ac &amp;&amp;
./autogen.sh CFLAGS='-O2' CXXFLAGS='-O2'    \
            --prefix=$XORG_PREFIX           \
            --sysconfdir=/etc               \
            --enable-texture-float          \
            --enable-osmesa                 \
            --enable-xa                     \
            --enable-glx-tls                \
            --with-egl-platforms="drm,x11"  \
            --with-gallium-drivers=$GLL_DRV &amp;&amp;

unset GLL_DRV &amp;&amp;

make</kbd></pre><p>
      If you have applied the xdemos patch, build the demo programs by
      running the following command:
    </p><pre class="userinput"><kbd class="command">make -C xdemos DEMOS_PREFIX=$XORG_PREFIX</kbd></pre><p>
      To test the results, issue: <span class="command"><strong>make check</strong></span>.
    </p><p>
      Now, as the <code class="systemitem">root</code> user:
    </p><pre class="root"><kbd class="command">make install</kbd></pre><p>
      If you have built the demo programs, install them by running the
      following command as the
      <code class="systemitem">root</code> user:
    </p><pre class="root"><kbd class="command">make -C xdemos DEMOS_PREFIX=$XORG_PREFIX install</kbd></pre><p>
      If desired, install the optional documentation by running
      the following commands as the
      <code class="systemitem">root</code> user:
    </p><pre class="root"><kbd class="command">install -v -dm755 /usr/share/doc/mesa-13.0.3 &amp;&amp;
cp -rfv docs/* /usr/share/doc/mesa-13.0.3</kbd></pre></div><div class="commands" lang="en" xml:lang="en"><h2 class="sect2">Command Explanations</h2><p>
      <span class="command"><strong>sed -i ... configure.ac</strong></span>: This sed removes a dependency
      on the <span class="application">libpthread-stubs</span> package which is
      useless on Linux.
    </p><p>
      <em class="parameter"><code>CFLAGS="-O2" CXXFLAGS="-O2"</code></em>: By default,
      <span class="application">Autoconf</span> sets CFLAGS and CXXFLAGS to
      "-g -O2". That results in binaries and libraries being built with
      debugging symbols which make them bigger. Override the default
      flags to omit the -g compiler flag so the final libraries are smaller.
    </p><p>
      <em class="parameter"><code>--enable-texture-float</code></em>: This switch enables
      floating-point textures and render buffers. Please consult
      <code class="filename">docs/patents.txt</code> to see if there are
      any legal issues if you use this feature.
    </p><p>
      <em class="parameter"><code>--enable-osmesa</code></em>: This switch enables building
      the <code class="filename">libOSMesa</code> library.
    </p><p>
      <em class="parameter"><code>--enable-xa</code></em>: This switch enables building the
      XA X Acceleration API (Required for VMware 3D Driver).
    </p><p>
      <em class="parameter"><code>--enable-gbm</code></em>: This switch enables building the
      <span class="application">Mesa</span> Graphics Buffer Manager library.
    </p><p>
      <em class="parameter"><code>--enable-glx-tls</code></em>: This switch enables TLS (Thread Local
      Storage) support in GLX.
    </p><p>
      <em class="parameter"><code>--with-egl-platforms="..."</code></em>: This parameter
      controls which platforms EGL will be built for. Available
      platforms are drm, x11 and wayland.
    </p><p>
      <em class="parameter"><code>--with-gallium-drivers="..."</code></em>: This parameter
      controls which Gallium3D drivers should be built. 
    </p><p>
      <code class="option">--enable-sysfs</code>: Use this switch to enable simple PCI
      identification method, required for building DRI on systems without udev.
    </p></div><div class="content" lang="en" xml:lang="en"><h2 class="sect2">Contents</h2><div class="segmentedlist"><div class="seglistitem"><div class="seg"><strong class="segtitle">Installed Programs: </strong><span class="segbody">
          glxgears and glxinfo
        </span></div><div class="seg"><strong class="segtitle">Installed Libraries: </strong><span class="segbody">
          libEGL.so,
          libgbm.so,
          libglapi.so,
          libGLESv1_CM.so,
          libGLESv2.so,
          libGL.so,
          libOSMesa.so,

          libwayland-egl.so (if built with <span class="application">Wayland</span>)
          libxatracker.so,
          libXvMCnouveau.so,
          and libXvMCr600.so
        </span></div><div class="seg"><strong class="segtitle">Installed Directories: </strong><span class="segbody">
          $XORG_PREFIX/{include/{EGL,GL,GLES,GLES2,GLES3,KHR},lib/{dri,vdpau}}
          and
          /usr/share/doc/mesa-13.0.3 (optional)
        </span></div></div></div><div class="variablelist"><h3>Short Descriptions</h3><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><a id="glxgears"></a><span class="term"><span class="command"><strong>glxgears</strong></span></span></p></td><td><p>
            is a GL demo useful for troubleshooting graphics
            problems.
          </p></td></tr><tr><td><p><a id="glxinfo"></a><span class="term"><span class="command"><strong>glxinfo</strong></span></span></p></td><td><p>
            is a diagnostic program that displays information about the
            graphics hardware and installed GL libraries.
          </p></td></tr><tr><td><p><a id="libEGL"></a><span class="term"><code class="filename">libEGL.so</code></span></p></td><td><p>
            provides a native platform graphics interface as
            defined by the EGL-1.4 specification.
          </p></td></tr><tr><td><p><a id="libgbm"></a><span class="term"><code class="filename">libgbm.so</code></span></p></td><td><p>
            is the <span class="application">Mesa</span> Graphics Buffer
            Manager library.
          </p></td></tr><tr><td><p><a id="libGLESv1_CM"></a><span class="term"><code class="filename">libGLESv1_CM.so</code></span></p></td><td><p>
            is the <span class="application">Mesa</span> OpenGL ES 1.1 library.
          </p></td></tr><tr><td><p><a id="libGLES2"></a><span class="term"><code class="filename">libGLES2.so</code></span></p></td><td><p>
            is the <span class="application">Mesa</span> OpenGL ES 2.0 library.
          </p></td></tr><tr><td><p><a id="libGL"></a><span class="term"><code class="filename">libGL.so</code></span></p></td><td><p>
            is the main <span class="application">Mesa</span> OpenGL library.
          </p></td></tr><tr><td><p><a id="libOSMesa"></a><span class="term"><code class="filename">libOSMesa.so</code></span></p></td><td><p>
            is the <span class="application">Mesa</span> Off-screen Rendering library.
          </p></td></tr><tr><td><p><a id="libxatracker"></a><span class="term"><code class="filename">libxatracker.so</code></span></p></td><td><p>
            is the Xorg Gallium3D acceleration library.
          </p></td></tr></tbody></table></div></div><p class="updated">Last updated 
      on
       2017-01-05 21:40:10 +0000</p></div><div class="navfooter"><ul><li class="prev"><a accesskey="p" href="llvm.html" title="LLVM-3.9.1">Prev</a><p>LLVM-3.9.1</p></li><li class="next"><a accesskey="n" href="mtdev.html" title="mtdev-1.1.5">Next</a><p>mtdev-1.1.5</p></li><li class="up"><a accesskey="u" href="ch01.html" title="Chapter 1. Installing packages in dependency build order">Up</a></li><li class="home"><a accesskey="h" href="index.html" title="Beyond Linux® From Scratch - Version 2017-01-20">Home</a></li></ul></div></body></html>