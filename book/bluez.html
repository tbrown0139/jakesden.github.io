<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd"><html xmlns="http://www.w3.org/1999/xhtml"><head><meta http-equiv="Content-Type" content="text/html; charset=ISO-8859-1" /><title>BlueZ-5.43</title><link rel="stylesheet" href="stylesheets/lfs.css" type="text/css" /><meta name="generator" content="DocBook XSL Stylesheets V1.73.2" /><link rel="stylesheet" href="../stylesheets/lfs-print.css" type="text/css" media="print" /></head><body class="blfs" id="blfs-2017-01-20"><div class="navheader"><h4>Beyond Linux<sup>®</sup> From Scratch - Version 2017-01-20</h4><h3>Chapter 1. Installing packages in dependency build order</h3><ul><li class="prev"><a accesskey="p" href="libical.html" title="libical-2.0.0">Prev</a><p>libical-2.0.0</p></li><li class="next"><a accesskey="n" href="itstool.html" title="itstool-2.0.2">Next</a><p>itstool-2.0.2</p></li><li class="up"><a accesskey="u" href="ch01.html" title="Chapter 1. Installing packages in dependency build order">Up</a></li><li class="home"><a accesskey="h" href="index.html" title="Beyond Linux® From Scratch - Version 2017-01-20">Home</a></li></ul></div><div class="sect1" lang="en" xml:lang="en"><h1 class="sect1"><a id="bluez" name="bluez"></a>BlueZ-5.43</h1><div class="package" lang="en" xml:lang="en"><h2 class="sect2">Introduction to BlueZ</h2><p>
      The <span class="application">BlueZ</span> package contains the
      Bluetooth protocol stack for Linux.
    </p><p>This package is known to build and work
                              properly using an LFS-7.10 platform.</p><h3>Package Information</h3><div class="itemizedlist"><ul class="compact"><li><p>
          Download (HTTP): <a class="ulink" href="http://www.kernel.org/pub/linux/bluetooth/bluez-5.43.tar.xz">http://www.kernel.org/pub/linux/bluetooth/bluez-5.43.tar.xz</a>
        </p></li><li><p>
          Download (FTP): <a class="ulink" href="ftp://ftp.kernel.org/pub/linux/bluetooth/bluez-5.43.tar.xz">ftp://ftp.kernel.org/pub/linux/bluetooth/bluez-5.43.tar.xz</a>
        </p></li><li><p>
          Download MD5 sum: 698def88df96840dfbb0858bb6d73350
        </p></li><li><p>
          Download size: 1.6 MB
        </p></li><li><p>
          Estimated disk space required: 70 MB (add 12 MB for tests)
        </p></li><li><p>
          Estimated build time: 0.5 SBU (add 0.3 SBU for tests)
        </p></li></ul></div><h3>Additional Downloads</h3><div class="itemizedlist"><ul class="compact"><li><p>
             Optional patch (required to work properly with gnome-bluetooth
             and/or kde bluedevil):
            <a class="ulink" href="http://www.linuxfromscratch.org/patches/blfs/svn/bluez-5.43-obexd_without_systemd-1.patch">http://www.linuxfromscratch.org/patches/blfs/svn/bluez-5.43-obexd_without_systemd-1.patch</a>
          </p></li></ul></div><h3>BlueZ Dependencies</h3><h4>Required</h4><p class="required">
      <a class="xref" href="dbus.html" title="dbus-1.10.14">dbus-1.10.14</a>,
      <a class="xref" href="glib2.html" title="GLib-2.50.2">GLib-2.50.2</a>, and
      <a class="xref" href="libical.html" title="libical-2.0.0">libical-2.0.0</a>
    </p><p class="usernotes">
      User Notes: <a class="ulink" href="http://wiki.linuxfromscratch.org/blfs/wiki/bluez">http://wiki.linuxfromscratch.org/blfs/wiki/bluez</a>
    </p></div><div class="kernel" lang="en" xml:lang="en"><h2 class="sect2"><a id="bluez-kernel" name="bluez-kernel"></a>Kernel Configuration</h2><p>
      Enable the following options in the kernel configuration and recompile the
      kernel if necessary:
    </p><pre class="screen"><code class="literal">[*] Networking support ---&gt;                [CONFIG_NET]
  &lt;/M&gt; Bluetooth subsystem support ---&gt;    [CONFIG_BT]
    &lt;*/M&gt; RFCOMM protocol support          [CONFIG_BT_RFCOMM]
    [*]   RFCOMM TTY support               [CONFIG_BT_RFCOMM_TTY]
    &lt;*/M&gt; BNEP protocol support            [CONFIG_BT_BNEP]
    [*]   Multicast filter support         [CONFIG_BT_BNEP_MC_FILTER]
    [*]   Protocol filter support          [CONFIG_BT_BNEP_PROTO_FILTER]
    &lt;*/M&gt; HIDP protocol support            [CONFIG_BT_HIDP]
        Bluetooth device drivers ---&gt;
          (Select the appropriate drivers for your Bluetooth hardware)

  &lt;*/M&gt; RF switch subsystem support ---&gt;   [CONFIG_RFKILL]</code></pre></div><div class="installation" lang="en" xml:lang="en"><h2 class="sect2">Installation of BlueZ</h2><p>
      If you are going to use <span class="application">BlueZ</span> with
      gnome-bluetooth and/or kde bluedevil, apply the following patch:
    </p><pre class="userinput"><kbd class="command">patch -Np1 -i ../bluez-5.43-obexd_without_systemd-1.patch</kbd></pre><p>
      Install <span class="application">BlueZ</span> by running the following
      commands:
    </p><pre class="userinput"><kbd class="command">./configure --prefix=/usr         \
            --sysconfdir=/etc     \
            --localstatedir=/var  \
            --enable-library      \
            --disable-systemd     &amp;&amp;
make</kbd></pre><p>
      To test the results, issue: <strong class="userinput"><code>make check</code></strong>.
    </p><p>
      Now, as the <code class="systemitem">root</code> user:
    </p><pre class="root"><kbd class="command">make install &amp;&amp;
ln -svf ../libexec/bluetooth/bluetoothd /usr/sbin</kbd></pre><p>
      Install the main configuration file as the
      <code class="systemitem">root</code> user:
    </p><pre class="root"><kbd class="command">install -v -dm755 /etc/bluetooth &amp;&amp;
install -v -m644 src/main.conf /etc/bluetooth/main.conf</kbd></pre><p>
      If desired, install the API documentation as the
      <code class="systemitem">root</code> user:
    </p><pre class="root"><kbd class="command">install -v -dm755 /usr/share/doc/bluez-5.43 &amp;&amp;
install -v -m644 doc/*.txt /usr/share/doc/bluez-5.43</kbd></pre></div><div class="commands" lang="en" xml:lang="en"><h2 class="sect2">Command Explanations</h2><p>
      <em class="parameter"><code>--enable-library</code></em>: This switch enables building the
      <span class="application">BlueZ</span> 4 compatibility library which is required by
      some applications.
    </p><p>
      <em class="parameter"><code>--disable-systemd</code></em>: This switch is needed because
      <span class="application">systemd</span> is not part of LFS/BLFS. If you are
      using systemd, remove this switch.
    </p><p>
      <span class="command"><strong>ln -svf ../libexec/bluetooth/bluetoothd /usr/sbin</strong></span>:
      This command makes access to the bluetooth daemon more convenient.
    </p></div><div class="configuration" lang="en" xml:lang="en"><h2 class="sect2">Configuring BlueZ</h2><div class="sect3" lang="en" xml:lang="en"><h3 class="sect3"><a id="bluez-config" name="bluez-config"></a>Configuration Files</h3><p>
        <code class="filename">/etc/bluetooth/main.conf</code> is installed automatically
        during the install.  Additionally, there are three supplementary
        configuration files.  /etc/sysconfig/bluetooth is installed as a part
        of the boot script below.  In addition, you optionally can install the
        following, as the <code class="systemitem">root</code> user:
      </p><pre class="root"><kbd class="command">cat &gt; /etc/bluetooth/rfcomm.conf &lt;&lt; "EOF"</kbd>
<code class="literal"># Start rfcomm.conf
# Set up the RFCOMM configuration of the Bluetooth subsystem in the Linux kernel.
# Use one line per command
# See the rfcomm man page for options


# End of rfcomm.conf</code>
EOF</pre><pre class="root"><kbd class="command">cat &gt; /etc/bluetooth/uart.conf &lt;&lt; "EOF"</kbd>
<code class="literal"># Start uart.conf
# Attach serial devices via UART HCI to BlueZ stack
# Use one line per device
# See the hciattach man page for options

# End of uart.conf</code>
EOF</pre></div><div class="sect3" lang="en" xml:lang="en"><h3 class="sect3"><a id="bluez-init" name="bluez-init"></a>Boot Script
             </h3><p>
        To automatically start the <span class="command"><strong>bluetoothd</strong></span> daemon when the
        system is rebooted, install the
        <code class="filename">/etc/rc.d/init.d/bluetooth</code> bootscript from the
        <a class="xref" href="bootscripts.html" title="BLFS Boot Scripts">blfs-bootscripts-20160902</a> package.
      </p><pre class="root"><kbd class="command">make install-bluetooth</kbd></pre></div></div><div class="content" lang="en" xml:lang="en"><h2 class="sect2">Contents</h2><div class="segmentedlist"><div class="seglistitem"><div class="seg"><strong class="segtitle">Installed Programs: </strong><span class="segbody">
          bccmd, bluemoon, bluetoothctl, bluetoothd (symlink), btmon, ciptool,
          hciattach, hciconfig, hcidump, hcitool, hex2hcd, l2ping, l2test,
          mpris-proxy, rctest, rfcomm, and sdptool
        </span></div><div class="seg"><strong class="segtitle">Installed Library: </strong><span class="segbody">
          libbluetooth.so
        </span></div><div class="seg"><strong class="segtitle">Installed Directories: </strong><span class="segbody">
          /etc/bluetooth, /usr/{include,libexec}/bluetooth, and
          /usr/share/doc/bluez-5.43
        </span></div></div></div><div class="variablelist"><h3>Short Descriptions</h3><table border="0"><col align="left" valign="top" /><tbody><tr><td><p><a id="bccmd"></a><span class="term"><span class="command"><strong>bccmd</strong></span></span></p></td><td><p>
            is used to issue BlueCore commands to Cambridge Silicon
            Radio devices.
          </p></td></tr><tr><td><p><a id="bluemoon"></a><span class="term"><span class="command"><strong>bluemoon</strong></span></span></p></td><td><p>
            is a Bluemoon configuration utility.
          </p></td></tr><tr><td><p><a id="bluetoothctl"></a><span class="term"><span class="command"><strong>bluetoothctl</strong></span></span></p></td><td><p>
            is the interactive Bluetooth control program.
          </p></td></tr><tr><td><p><a id="bluetoothd"></a><span class="term"><span class="command"><strong>bluetoothd</strong></span></span></p></td><td><p>
            is the Bluetooth daemon.
          </p></td></tr><tr><td><p><a id="btmon"></a><span class="term"><span class="command"><strong>btmon</strong></span></span></p></td><td><p>
            provides access to the Bluetooth subsystem monitor
            infrastructure for reading HCI traces.
          </p></td></tr><tr><td><p><a id="ciptool"></a><span class="term"><span class="command"><strong>ciptool</strong></span></span></p></td><td><p>
            is used to set up, maintain, and inspect the CIP configuration
            of the Bluetooth subsystem in the Linux kernel.
          </p></td></tr><tr><td><p><a id="hciattach"></a><span class="term"><span class="command"><strong>hciattach</strong></span></span></p></td><td><p>
            is used to attach a serial UART to the Bluetooth stack
            as HCI transport interface.
          </p></td></tr><tr><td><p><a id="hciconfig"></a><span class="term"><span class="command"><strong>hciconfig</strong></span></span></p></td><td><p>
            is used to configure Bluetooth devices.
          </p></td></tr><tr><td><p><a id="hcidump"></a><span class="term"><span class="command"><strong>hcidump</strong></span></span></p></td><td><p>
            reads raw HCI data coming from and going to a Bluetooth
            device and prints to screen commands, events and data
            in a human-readable form.
          </p></td></tr><tr><td><p><a id="hcitool"></a><span class="term"><span class="command"><strong>hcitool</strong></span></span></p></td><td><p>
            is used to configure Bluetooth connections and send some
            special command to Bluetooth devices.
          </p></td></tr><tr><td><p><a id="hex2hcd"></a><span class="term"><span class="command"><strong>hex2hcd</strong></span></span></p></td><td><p>
            is used to convert a file needed by Broadcom devices
            to hcd (Broadcom bluetooth firmware) format.
          </p></td></tr><tr><td><p><a id="l2ping"></a><span class="term"><span class="command"><strong>l2ping</strong></span></span></p></td><td><p>
            is used to send a L2CAP echo request to the Bluetooth MAC
            address given in dotted hex notation.
          </p></td></tr><tr><td><p><a id="l2test"></a><span class="term"><span class="command"><strong>l2test</strong></span></span></p></td><td><p>
            is L2CAP testing program.
          </p></td></tr><tr><td><p><a id="rctest"></a><span class="term"><span class="command"><strong>rctest</strong></span></span></p></td><td><p>
            is used to test RFCOMM communications on the
            Bluetooth stack.
          </p></td></tr><tr><td><p><a id="rfcomm"></a><span class="term"><span class="command"><strong>rfcomm</strong></span></span></p></td><td><p>
            is used to set up, maintain, and inspect the RFCOMM
            configuration of the Bluetooth subsystem in the
            Linux kernel.
          </p></td></tr><tr><td><p><a id="sdptool"></a><span class="term"><span class="command"><strong>sdptool</strong></span></span></p></td><td><p>
            is used to perform SDP queries on Bluetooth devices.
          </p></td></tr><tr><td><p><a id="libbluetooth"></a><span class="term"><code class="filename">libbluetooth.so</code></span></p></td><td><p>
            contains the <span class="application">BlueZ</span> 4 API functions.
          </p></td></tr></tbody></table></div></div><p class="updated">Last updated 
      on
       2016-11-16 18:14:08 +0000</p></div><div class="navfooter"><ul><li class="prev"><a accesskey="p" href="libical.html" title="libical-2.0.0">Prev</a><p>libical-2.0.0</p></li><li class="next"><a accesskey="n" href="itstool.html" title="itstool-2.0.2">Next</a><p>itstool-2.0.2</p></li><li class="up"><a accesskey="u" href="ch01.html" title="Chapter 1. Installing packages in dependency build order">Up</a></li><li class="home"><a accesskey="h" href="index.html" title="Beyond Linux® From Scratch - Version 2017-01-20">Home</a></li></ul></div></body></html>